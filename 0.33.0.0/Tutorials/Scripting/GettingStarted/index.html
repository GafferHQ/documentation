

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Getting Started &mdash; Gaffer 0.33.0.0 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../../../_static/favicon.ico"/>
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="Gaffer 0.33.0.0 documentation" href="../../../index.html"/>
        <link rel="up" title="Scripting" href="../index.html"/>
        <link rel="next" title="Creating Configuration Files" href="../CreatingConfigurationFiles/index.html"/>
        <link rel="prev" title="Scripting" href="../index.html"/> 

  
  <script src="../../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../../index.html" class="icon icon-home"> Gaffer
          

          
          </a>

          
            
            
              <div class="version">
                0.33.0.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../Installation/index.html">Installation</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">Tutorials</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../GettingStarted/index.html">Getting Started</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html">Scripting</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">Getting Started</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#the-scripteditor">The ScriptEditor</a></li>
<li class="toctree-l4"><a class="reference internal" href="#nodes-and-plugs">Nodes and plugs</a></li>
<li class="toctree-l4"><a class="reference internal" href="#editing-plug-values">Editing plug values</a></li>
<li class="toctree-l4"><a class="reference internal" href="#making-connections">Making connections</a></li>
<li class="toctree-l4"><a class="reference internal" href="#recap">Recap</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../CreatingConfigurationFiles/index.html">Creating Configuration Files</a></li>
<li class="toctree-l3"><a class="reference internal" href="../AddingAMenuItem/index.html">Adding a Menu Item</a></li>
<li class="toctree-l3"><a class="reference internal" href="../QueryingAScene/index.html">Querying a Scene</a></li>
<li class="toctree-l3"><a class="reference internal" href="../UsingTheOSLCodeNode/index.html">Using the OSLCode Node</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../ManagingComplexity/index.html">Managing Complexity</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../Reference/index.html">Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../ReleaseNotes/index.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../Appendices/index.html">Appendices</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../../index.html">Gaffer</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../../index.html">Tutorials</a> &raquo;</li>
      
          <li><a href="../index.html">Scripting</a> &raquo;</li>
      
    <li>Getting Started</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../../_sources/Tutorials/Scripting/GettingStarted/index.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="getting-started">
<span id="getting-started"></span><h1>Getting Started<a class="headerlink" href="#getting-started" title="Permalink to this headline">¶</a></h1>
<p>Gaffer&#8217;s Python scripting API is fairly frugal, so learning a few fundamental concepts goes a long way. Here we&#8217;ll take a quick tour through these fundamentals using Gaffer&#8217;s <a class="reference internal" href="../../../Reference/UIReference/ScriptEditor.html"><span class="doc">ScriptEditor</span></a>. We&#8217;ll see how we can enter Python code within the ScriptEditor to create nodes and plugs, and edit their values and connections. We&#8217;ll also see how we can use drag and drop to conveniently enter text into the ScriptEditor itself.</p>
<div class="section" id="the-scripteditor">
<span id="the-scripteditor"></span><h2>The ScriptEditor<a class="headerlink" href="#the-scripteditor" title="Permalink to this headline">¶</a></h2>
<p>After launching Gaffer, the ScriptEditor can be found in its default location on a tab in the bottom right of the main window.</p>
<p><img alt="ScriptEditor image" src="../../../_images/scriptEditor.png" /></p>
<p>The editor is broken into two sections. The bottom field is for entering python commands, and this functions much like any other basic text editor. We&#8217;ll get started right away by entering the text <code class="docutils literal"><span class="pre">print</span> <span class="pre">&quot;Hello</span> <span class="pre">World!&quot;,</span> <span class="pre">script</span></code>. We can then execute the code by pressing <em>Ctrl+Enter</em>.</p>
<p>The top field displays output from any commands executed, so we should see the greeting we printed along with the mysterious <code class="docutils literal"><span class="pre">script</span></code> variable that we printed with it. The <code class="docutils literal"><span class="pre">script</span></code> variable references the root node of a Gaffer file, and is our gateway to further exploration.</p>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last"> Small portions of the text input may be executed individually and kept around for later
editing by selecting them before hitting <em>Ctrl+Enter</em>. When there is no selection
<em>Ctrl+Enter</em> executes everything and clears the contents of the input field, but the commands
can always be retrieved later by cutting and pasting them from the output field.</p>
</div>
</div>
<div class="section" id="nodes-and-plugs">
<span id="nodes-and-plugs"></span><h2>Nodes and plugs<a class="headerlink" href="#nodes-and-plugs" title="Permalink to this headline">¶</a></h2>
<p>The most important classes in the Gaffer API are the Nodes and Plugs which are connected together to make up a dependency graph. These are parented together in a hierarchy which nicely maps to python’s dictionary syntax. Plugs may be parented to nodes using Python&#8217;s familiar dictionary notation&nbsp;:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">node</span> <span class="o">=</span> <span class="n">Gaffer</span><span class="o">.</span><span class="n">Node</span><span class="p">()</span>
<span class="n">node</span><span class="p">[</span><span class="s2">&quot;firstPlug&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">Gaffer</span><span class="o">.</span><span class="n">IntPlug</span><span class="p">()</span>
<span class="n">node</span><span class="p">[</span><span class="s2">&quot;secondPlug&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">Gaffer</span><span class="o">.</span><span class="n">FloatPlug</span><span class="p">()</span>
</pre></div>
</div>
<p>If you follow along by entering the code above in the ScriptEditor, you may wonder why our newly created node hasn&#8217;t appeared in the NodeEditor or NodeGraph. This is because we haven&#8217;t given it a parent yet, so it is not associated with any script. Let&#8217;s add it to the <code class="docutils literal"><span class="pre">script</span></code> root, and select it so that it appears in the NodeEditor&nbsp;:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">script</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span> <span class="n">node</span> <span class="p">)</span>
<span class="n">script</span><span class="o">.</span><span class="n">selection</span><span class="p">()</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
<span class="n">script</span><span class="o">.</span><span class="n">selection</span><span class="p">()</span><span class="o">.</span><span class="n">add</span><span class="p">(</span> <span class="n">node</span> <span class="p">)</span>
</pre></div>
</div>
<p><img alt="NodeEditor image" src="../../../_images/nodeEditor.png" /></p>
<p>It appeared! Exciting stuff! Nodes have a variety of methods to manipulate them after construction, so let&#8217;s celebrate by using one of them to rename the node&nbsp;:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">node</span><span class="o">.</span><span class="n">setName</span><span class="p">(</span> <span class="s2">&quot;MyMostAwesomeNode&quot;</span> <span class="p">)</span>
</pre></div>
</div>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last"> You may be wondering why we used dictionary syntax to parent the plugs into the node, but
we used the <code class="docutils literal"><span class="pre">addChild()</span></code> method to parent the node to the script. We could actually have used
either, but the <code class="docutils literal"><span class="pre">addChild()</span></code> method takes care of automatically renaming the child if it would
clash with an existing node in the script. If we used the dictionary syntax we would have been
replacing any existing node of the same name, which is often not what we want.</p>
</div>
</div>
<div class="section" id="editing-plug-values">
<span id="editing-plug-values"></span><h2>Editing plug values<a class="headerlink" href="#editing-plug-values" title="Permalink to this headline">¶</a></h2>
<p>Our humble node doesn&#8217;t do anything particularly interesting, so let&#8217;s create one that can actually generate a scene. Each node type in Gaffer is a different class in Python, and lives inside a module specific to the sort of processing it performs (a full list of modules and the nodes they provide is available in the <a class="reference internal" href="../../../Reference/NodeReference/index.html"><span class="doc">Node Reference</span></a>).</p>
<p>For now we&#8217;ll go ahead and make a Sphere&nbsp;:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">GafferScene</span>
<span class="n">script</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span> <span class="n">GafferScene</span><span class="o">.</span><span class="n">Sphere</span><span class="p">()</span> <span class="p">)</span>
</pre></div>
</div>
<p>This time we&#8217;ve added the node directly to the script without assigning it to a variable, so we don&#8217;t yet have a convenient handle for the node. Fear not, we can always get an appropriate reference to a node by <em>Middle Dragging</em> it from the NodeGraph and into the ScriptEditor. As you might guess, this gives us the familiar dictionary syntax of <code class="docutils literal"><span class="pre">script[&quot;Sphere&quot;]</span></code>. We can do the same for plugs by <em>Left Dragging</em> them from the NodeEditor. Get the plug for controlling the radius by dragging the &#8220;Radius&#8221; label from the NodeEditor, to insert the text <code class="docutils literal"><span class="pre">script[&quot;Sphere&quot;][&quot;radius&quot;]</span></code>.</p>
<p>Plugs are Python classes in the same way that nodes are, and have additional methods we can use for editing them. The <code class="docutils literal"><span class="pre">getValue()</span></code> method returns the current value of a plug, so we can use it to learn that the sphere has a radius of 1&nbsp;:</p>
<p><img alt="ScriptEditor getValue() image" src="../../../_images/scriptEditorGetValue.png" /></p>
<p>As you might have guessed, we can change the value using a matching <code class="docutils literal"><span class="pre">setValue()</span></code> method. Let&#8217;s go ahead and set the values for a couple of the simplest plugs to demonstrate how this works&nbsp;:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">script</span><span class="p">[</span><span class="s2">&quot;Sphere&quot;</span><span class="p">][</span><span class="s2">&quot;radius&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span> <span class="mf">10.5</span> <span class="p">)</span>
<span class="n">script</span><span class="p">[</span><span class="s2">&quot;Sphere&quot;</span><span class="p">][</span><span class="s2">&quot;name&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span> <span class="s2">&quot;mySphere&quot;</span> <span class="p">)</span>
</pre></div>
</div>
<p>In the same way that nodes can have child plugs, plugs themselves can have children, and they are accessed using exactly the same dictionary syntax. Gaffer makes use of plugs nested in this way to represent more complex values, such as the xyz translate, rotate and scale of the sphere. This means we can either set the plugs individually, or set several at a time using the <code class="docutils literal"><span class="pre">setValue()</span></code> method on the parent plug&nbsp;:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1"># Setting leaf plugs individually</span>
<span class="n">script</span><span class="p">[</span><span class="s2">&quot;Sphere&quot;</span><span class="p">][</span><span class="s2">&quot;transform&quot;</span><span class="p">][</span><span class="s2">&quot;translate&quot;</span><span class="p">][</span><span class="s2">&quot;x&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span> <span class="mi">1</span> <span class="p">)</span>
<span class="n">script</span><span class="p">[</span><span class="s2">&quot;Sphere&quot;</span><span class="p">][</span><span class="s2">&quot;transform&quot;</span><span class="p">][</span><span class="s2">&quot;translate&quot;</span><span class="p">][</span><span class="s2">&quot;y&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span> <span class="mi">2</span> <span class="p">)</span>
<span class="n">script</span><span class="p">[</span><span class="s2">&quot;Sphere&quot;</span><span class="p">][</span><span class="s2">&quot;transform&quot;</span><span class="p">][</span><span class="s2">&quot;translate&quot;</span><span class="p">][</span><span class="s2">&quot;z&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span> <span class="mi">3</span> <span class="p">)</span>

<span class="c1"># Setting them all in one shot</span>
<span class="n">script</span><span class="p">[</span><span class="s2">&quot;Sphere&quot;</span><span class="p">][</span><span class="s2">&quot;transform&quot;</span><span class="p">][</span><span class="s2">&quot;translate&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span> <span class="n">IECore</span><span class="o">.</span><span class="n">V3f</span><span class="p">(</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span> <span class="p">)</span> <span class="p">)</span>
</pre></div>
</div>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last"> The second form is often more convenient because it is shorter, and because the <code class="docutils literal"><span class="pre">V3f</span></code> class
provides lots of useful functionality for doing maths with vector values. As a newcomer to Gaffer
though, it&#8217;s unlikely that we could have guessed the right syntax. Here drag and drop comes to our
rescue again - <em>Shift+Left Dragging</em> the plug label from the NodeEditor and into the ScriptEditor
will enter the code for current value of the plug, providing a convenient syntax reference.</p>
</div>
</div>
<div class="section" id="making-connections">
<span id="making-connections"></span><h2>Making connections<a class="headerlink" href="#making-connections" title="Permalink to this headline">¶</a></h2>
<p>As well as having values, plugs can be connected together so that values flow from one to another. We&#8217;ll use the ScriptEditor to create a small node network to demonstrate this.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">meshToPoints</span> <span class="o">=</span> <span class="n">GafferScene</span><span class="o">.</span><span class="n">MeshToPoints</span><span class="p">()</span>
<span class="n">meshToPoints</span><span class="p">[</span><span class="s2">&quot;in&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">setInput</span><span class="p">(</span> <span class="n">script</span><span class="p">[</span><span class="s2">&quot;Sphere&quot;</span><span class="p">][</span><span class="s2">&quot;out&quot;</span><span class="p">]</span> <span class="p">)</span>
<span class="n">meshToPoints</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span> <span class="s2">&quot;sphere&quot;</span> <span class="p">)</span>
<span class="n">script</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span> <span class="n">meshToPoints</span> <span class="p">)</span>
</pre></div>
</div>
<p>As before, <code class="docutils literal"><span class="pre">meshToPoints[&quot;in&quot;]</span></code> refers to a plug that is the child of a node, but instead of setting its value with the <code class="docutils literal"><span class="pre">setValue()</span></code> method, this time we have given it an input connection with the <code class="docutils literal"><span class="pre">setInput()</span></code> method.</p>
<p><img alt="MeshToPoints Viewer" src="../../../_images/meshToPointsViewer.png" />
<img alt="MeshToPoints NodeGraph" src="../../../_images/meshToPointsNodeGraph.png" /></p>
<p>Now, let&#8217;s create a Camera and group it with our funky sphere thing, so that we have the beginnings of a scene we could render.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">camera</span> <span class="o">=</span> <span class="n">GafferScene</span><span class="o">.</span><span class="n">Camera</span><span class="p">()</span>
<span class="n">script</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span> <span class="n">camera</span> <span class="p">)</span>
<span class="n">group</span> <span class="o">=</span> <span class="n">GafferScene</span><span class="o">.</span><span class="n">Group</span><span class="p">()</span>
<span class="n">script</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span> <span class="n">group</span> <span class="p">)</span>
<span class="c1"># Note the use of list syntax</span>
<span class="n">group</span><span class="p">[</span><span class="s2">&quot;in&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">setInput</span><span class="p">(</span> <span class="n">meshToPoints</span><span class="p">[</span><span class="s2">&quot;out&quot;</span><span class="p">]</span> <span class="p">)</span>
<span class="n">group</span><span class="p">[</span><span class="s2">&quot;in&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">setInput</span><span class="p">(</span> <span class="n">camera</span><span class="p">[</span><span class="s2">&quot;out&quot;</span><span class="p">]</span> <span class="p">)</span>
</pre></div>
</div>
<p>Until now, we&#8217;ve been accessing plugs and nodes by name, using Python&#8217;s dictionary syntax. In the code snippet above you can see that we can also access children using Python&#8217;s list syntax, and for the Group node this is particularly convenient. The Group can have any number of inputs, so the <code class="docutils literal"><span class="pre">group[&quot;in&quot;]</span></code> plug behaves like an array, and we can access its first child with <code class="docutils literal"><span class="pre">group[&quot;in&quot;][0]</span></code> and it&#8217;s second child with <code class="docutils literal"><span class="pre">group[&quot;in&quot;][1]</span></code>, and so on.</p>
<p><img alt="MeshToPoints NodeGraph" src="../../../_images/group1.png" /></p>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last"> The fact that some plugs are visible only in the NodeEditor and some plugs are visible only in the NodeGraph might give the false impression that only the plugs in the NodeGraph can be connected. In fact, this is not the case, and as a general rule almost any plug can be given an input connection.</p>
</div>
</div>
<div class="section" id="recap">
<span id="recap"></span><h2>Recap<a class="headerlink" href="#recap" title="Permalink to this headline">¶</a></h2>
<p>We&#8217;ve seen that Gaffer&#8217;s node graphs can be constructed using a minimal set of scripting commands, and that the ScriptEditor makes experimenting with these commands relatively easy by allowing nodes and plugs to be dragged and dropped directly into the code. The <a class="reference internal" href="../../../Reference/ScriptingReference/index.html"><span class="doc">Scripting Reference</span></a> and <a class="reference internal" href="../../../Reference/UIReference/ScriptEditor.html"><span class="doc">ScriptEditor Reference</span></a> sections provide a useful reminder of all we&#8217;ve covered in this tutorial, and additional information useful for further exploration.</p>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p> Gaffer&#8217;s .gfr files are simply Python scripts which contain all the code necessary
to reconstruct the saved node network. If you&#8217;re ever struggling to find a way of scripting
something in the documentation, it can be handy to construct a network by hand and then open
the .gfr file in a text editor for use as a cheat sheet. Similarly, you can use <em>Ctrl+C</em>
to copy a network from the NodeGraph, and paste it as code into the ScriptEditor with <em>Ctrl+V</em>.</p>
<p class="last">Finally, since Gaffer is open source, you&#8217;ll often find inspiration and examples in the
<a class="reference external" href="https://github.com/GafferHQ/gaffer/tree/0.33.0.0">source code itself</a>.</p>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../CreatingConfigurationFiles/index.html" class="btn btn-neutral float-right" title="Creating Configuration Files" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../index.html" class="btn btn-neutral" title="Scripting" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2011-2016 John Haddon, 2011-2016 Image Engine Design Inc..

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../',
            VERSION:'0.33.0.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>