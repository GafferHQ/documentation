

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Creating Configuration Files &mdash; Gaffer 0.45.0.0 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../../../_static/favicon.ico"/>
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="Gaffer 0.45.0.0 documentation" href="../../../index.html"/>
        <link rel="up" title="Scripting" href="../index.html"/>
        <link rel="next" title="Adding a Menu Item" href="../AddingAMenuItem/index.html"/>
        <link rel="prev" title="Getting Started" href="../GettingStarted/index.html"/> 

  
  <script src="../../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../../index.html" class="icon icon-home"> Gaffer
          

          
          </a>

          
            
            
              <div class="version">
                0.45.0.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../Installation/index.html">Installation</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">Tutorials</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../GettingStarted/index.html">Getting Started</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html">Scripting</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../GettingStarted/index.html">Getting Started</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Creating Configuration Files</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#introduction">Introduction</a></li>
<li class="toctree-l4"><a class="reference internal" href="#startup-file-locations">Startup file locations</a></li>
<li class="toctree-l4"><a class="reference internal" href="#creating-a-simple-startup-file">Creating a simple startup file</a></li>
<li class="toctree-l4"><a class="reference internal" href="#a-more-useful-example">A more useful example</a></li>
<li class="toctree-l4"><a class="reference internal" href="#next-steps">Next steps</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../AddingAMenuItem/index.html">Adding a Menu Item</a></li>
<li class="toctree-l3"><a class="reference internal" href="../QueryingAScene/index.html">Querying a Scene</a></li>
<li class="toctree-l3"><a class="reference internal" href="../UsingTheOSLCodeNode/index.html">Using the OSLCode Node</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../ManagingComplexity/index.html">Managing Complexity</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../Reference/index.html">Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../ReleaseNotes/index.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../Appendices/index.html">Appendices</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Gaffer</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../../index.html">Tutorials</a> &raquo;</li>
        
          <li><a href="../index.html">Scripting</a> &raquo;</li>
        
      <li>Creating Configuration Files</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../../_sources/Tutorials/Scripting/CreatingConfigurationFiles/index.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="creating-configuration-files">
<span id="creating-configuration-files"></span><h1>Creating Configuration Files<a class="headerlink" href="#creating-configuration-files" title="Permalink to this headline">¶</a></h1>
<div class="section" id="introduction">
<span id="introduction"></span><h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>Gaffer applications are intended to be easily extensible and customisable, and to this end provide many scripting hooks for registering new behaviours and customising the user interface. At application startup, a series of configuration files are executed, providing an opportunity for the intrepid TD to make his or her mark.</p>
</div>
<div class="section" id="startup-file-locations">
<span id="startup-file-locations"></span><h2>Startup file locations<a class="headerlink" href="#startup-file-locations" title="Permalink to this headline">¶</a></h2>
<p>The location of Gaffer’s configuration files are specified using the <code class="docutils literal"><span class="pre">GAFFER_STARTUP_PATHS</span></code> environment variable. This is a colon separated list of paths to directories where the startup files reside. Config directories at the end of the list are executed first, allowing them to be overridden by config directories earlier in the list.</p>
<p>Gaffer automatically adds the <code class="docutils literal"><span class="pre">~/gaffer/startup</span></code> config directory to the <code class="docutils literal"><span class="pre">GAFFER_STARTUP_PATHS</span></code> to allow users to create their own config files without having to faff around with the environment. This user level config is run last, allowing it to take precedence over all other configuration files.</p>
<p>Within a startup directory, config files are stored in subdirectories by application name - each application only executes the files in the appropriate directory. So for instance, the browser app executes files from the <code class="docutils literal"><span class="pre">~/gaffer/startup/browser</span></code> directory.</p>
</div>
<div class="section" id="creating-a-simple-startup-file">
<span id="creating-a-simple-startup-file"></span><h2>Creating a simple startup file<a class="headerlink" href="#creating-a-simple-startup-file" title="Permalink to this headline">¶</a></h2>
<p>We can add a startup script for the main gaffer application by creating a file in the &#8220;gui&#8221; subdirectory of the user startup location&nbsp;:</p>
<p><code class="docutils literal"><span class="pre">~/gaffer/startup/gui/startupTest.py</span></code></p>
<p>For now, let’s just create a really simple script to provide a nice little distraction from work.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">urllib2</span>
<span class="kn">import</span> <span class="nn">datetime</span>
<span class="n">day</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="o">.</span><span class="n">today</span><span class="p">()</span>
<span class="n">factInfoURL</span> <span class="o">=</span> <span class="n">urllib2</span><span class="o">.</span><span class="n">urlopen</span><span class="p">(</span> <span class="s2">&quot;http://numbersapi.com/</span><span class="si">%d</span><span class="s2">/</span><span class="si">%d</span><span class="s2">/date?json&quot;</span> <span class="o">%</span> <span class="p">(</span> <span class="n">day</span><span class="o">.</span><span class="n">month</span><span class="p">,</span> <span class="n">day</span><span class="o">.</span><span class="n">day</span> <span class="p">)</span> <span class="p">)</span>
<span class="n">factURL</span> <span class="o">=</span> <span class="n">urllib2</span><span class="o">.</span><span class="n">urlopen</span><span class="p">(</span> <span class="s2">&quot;http://numbersapi.com/</span><span class="si">%d</span><span class="s2">/</span><span class="si">%d</span><span class="s2">/date&quot;</span> <span class="o">%</span> <span class="p">(</span> <span class="n">day</span><span class="o">.</span><span class="n">month</span><span class="p">,</span> <span class="n">day</span><span class="o">.</span><span class="n">day</span> <span class="p">)</span> <span class="p">)</span>
<span class="nb">print</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span> <span class="n">factURL</span><span class="o">.</span><span class="n">readlines</span><span class="p">()</span> <span class="p">)</span>
</pre></div>
</div>
<p>Hopefully now when we run gaffer, we’ll receive an edifying fact, and know that the config mechanism is working as expected.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">&gt;</span><span class="n">gaffer</span>
<span class="n">July</span> <span class="mi">13</span><span class="n">th</span> <span class="ow">is</span> <span class="n">the</span> <span class="n">day</span> <span class="ow">in</span> <span class="mi">1919</span> <span class="n">that</span> <span class="n">the</span> <span class="n">British</span> <span class="n">airship</span> <span class="n">R34</span> <span class="n">lands</span> <span class="ow">in</span> <span class="n">Norfolk</span><span class="p">,</span> <span class="n">England</span><span class="p">,</span>
<span class="n">completing</span> <span class="n">the</span> <span class="n">first</span> <span class="n">airship</span> <span class="k">return</span> <span class="n">journey</span> <span class="n">across</span> <span class="n">the</span> <span class="n">Atlantic</span> <span class="ow">in</span> <span class="mi">182</span> <span class="n">hours</span> <span class="n">of</span> <span class="n">flight</span><span class="o">.</span>
</pre></div>
</div>
</div>
<div class="section" id="a-more-useful-example">
<span id="a-more-useful-example"></span><h2>A more useful example<a class="headerlink" href="#a-more-useful-example" title="Permalink to this headline">¶</a></h2>
<p>Gaffer&#8217;s file browsers all support user-defined bookmarks to help users in their day-to-day navigation. In addition to users creating their own bookmarks via the UI, you can also create bookmarks via Gaffer&#8217;s configuration files, making it very easy to create standard bookmarks for shared use across a facility. The following example code demonstrates how we might do so using a fictional <code class="docutils literal"><span class="pre">MyJobEnvironment</span></code> module to provide facility specific information.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">GafferUI</span>
<span class="kn">import</span> <span class="nn">MyJobEnvironment</span>

<span class="c1"># Bookmarks are associated with an application, so we must first acquire the right set</span>
<span class="c1"># of bookmarks for this particular application.</span>
<span class="n">bookmarks</span> <span class="o">=</span> <span class="n">GafferUI</span><span class="o">.</span><span class="n">Bookmarks</span><span class="o">.</span><span class="n">acquire</span><span class="p">(</span> <span class="n">application</span> <span class="p">)</span>

<span class="c1"># Now we can go about adding some bookmarks for our current job, sequence and shot,</span>
<span class="c1"># assuming we have a handy custom module for getting them.</span>
<span class="n">bookmarks</span><span class="o">.</span><span class="n">add</span><span class="p">(</span> <span class="s2">&quot;Job&quot;</span><span class="p">,</span> <span class="n">MyJobEnvironment</span><span class="o">.</span><span class="n">currentJobPath</span><span class="p">()</span> <span class="p">)</span>
<span class="n">bookmarks</span><span class="o">.</span><span class="n">add</span><span class="p">(</span> <span class="s2">&quot;Sequence&quot;</span><span class="p">,</span> <span class="n">MyJobEnvironment</span><span class="o">.</span><span class="n">currentSequencePath</span><span class="p">()</span> <span class="p">)</span>
<span class="n">bookmarks</span><span class="o">.</span><span class="n">add</span><span class="p">(</span> <span class="s2">&quot;Shot&quot;</span><span class="p">,</span> <span class="n">MyJobEnvironment</span><span class="o">.</span><span class="n">currentShotPath</span><span class="p">()</span> <span class="p">)</span>

<span class="c1"># We might want some bookmarks to only appear in certain contexts related to the</span>
<span class="c1"># sort of file we&#39;re interested in. These are stored in a category-specific set</span>
<span class="c1"># of bookmarks which we must acquire on its own.</span>
<span class="n">bookmarks</span> <span class="o">=</span> <span class="n">GafferUI</span><span class="o">.</span><span class="n">Bookmarks</span><span class="o">.</span><span class="n">acquire</span><span class="p">(</span> <span class="n">application</span><span class="p">,</span> <span class="n">category</span><span class="o">=</span><span class="s2">&quot;image&quot;</span> <span class="p">)</span>
<span class="n">bookmarks</span><span class="o">.</span><span class="n">add</span><span class="p">(</span> <span class="s2">&quot;Output&quot;</span><span class="p">,</span> <span class="n">MyJobEnvironment</span><span class="o">.</span><span class="n">currentShotPath</span><span class="p">()</span> <span class="o">+</span> <span class="s2">&quot;/outputImages&quot;</span> <span class="p">)</span>
<span class="n">bookmarks</span><span class="o">.</span><span class="n">add</span><span class="p">(</span> <span class="s2">&quot;Input&quot;</span><span class="p">,</span> <span class="n">MyJobEnvironment</span><span class="o">.</span><span class="n">currentShotPath</span><span class="p">()</span> <span class="o">+</span> <span class="s2">&quot;/inputImages&quot;</span> <span class="p">)</span>

<span class="c1"># We can also define default locations to be used as the starting point for</span>
<span class="c1"># file browsers when the path being edited is empty.</span>
<span class="n">bookmarks</span> <span class="o">=</span> <span class="n">GafferUI</span><span class="o">.</span><span class="n">Bookmarks</span><span class="o">.</span><span class="n">acquire</span><span class="p">(</span> <span class="n">application</span><span class="p">,</span> <span class="n">category</span><span class="o">=</span><span class="s2">&quot;plateImport&quot;</span> <span class="p">)</span>
<span class="n">bookmarks</span><span class="o">.</span><span class="n">setDefault</span><span class="p">(</span> <span class="n">MyJobEnvironment</span><span class="o">.</span><span class="n">currentJobPath</span><span class="p">()</span> <span class="o">+</span> <span class="s2">&quot;/fromClient/plates&quot;</span> <span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="next-steps">
<span id="next-steps"></span><h2>Next steps<a class="headerlink" href="#next-steps" title="Permalink to this headline">¶</a></h2>
<p>Naturally, we might want to do something slightly more useful at startup. Taking a look at <a class="reference external" href="https://github.com/GafferHQ/gaffer/tree/0.45.0.0/startup/gui">Gaffer’s internal config
files</a> might provide some good starting points for more useful customisations.</p>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../AddingAMenuItem/index.html" class="btn btn-neutral float-right" title="Adding a Menu Item" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../GettingStarted/index.html" class="btn btn-neutral" title="Getting Started" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2011-2016 John Haddon, 2011-2016 Image Engine Design Inc..

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../',
            VERSION:'0.45.0.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: ''
        };
    </script>
      <script type="text/javascript" src="../../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>